!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("concent"),require("react")):"function"==typeof define&&define.amd?define(["concent","react"],n):(e="undefined"!=typeof globalThis?globalThis:e||self)["cxy-react-i18n"]=n(e.concent,e.React)}(this,function(t,e){"use strict";var n,r=(n=e)&&"object"==typeof n&&"default"in n?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(n,e){var t,r=Object.keys(n);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(n),e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),r.push.apply(r,t)),r}function s(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?c(Object(t),!0).forEach(function(e){a(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var u="cxy_react_i18n",i=Object.freeze({__proto__:null,MODEL_NAME:u});function l(e){var n=o(e);return null===e?"null":"object"===n?{"[object Array]":"array","[object Object]":"object","[object Number]":"number","[object Boolean]":"boolean","[object String]":"string"}[Object.prototype.toString.call(e)]:n}function f(e){var n;if("object"===o(e))if(Array.isArray(e))for(var t in n=[],e)n.push(f(e[t]));else if(null===e)n=null;else if(e.constructor===RegExp)n=e;else for(var r in n={},e)n[r]=f(e[r]);else n=e;return n}function g(){t.run(a({},u,y),{middlewares:[],plugins:[],isHot:!0,isStrict:!1,log:!1,alwaysRenderCaller:!0,computedCompare:!0,watchCompare:!0,watchImmediate:!0,reComputed:!0,objectValueCompare:!0,nonObjectValueCompare:!0,localStorage:!0})}function m(){t.configure(u,y)}var d={fn:function(e,n,t){var r=e.lang,o=e.message;try{return o[r]||{}}catch(e){return console.warn("cxy-react-i18n error:",e),{}}},depKeys:["lang","message"],compare:!0},y={state:{lang:"",message:{}},reducer:Object.freeze({__proto__:null,setLang:function(e,n,t){if(e)if("string"!==l(e))console.warn("cxy-react-i18n 设置语言 新语言类型格式错误,期望:string");else{if(t.moduleComputed.i18nLangObj[e])return{lang:f(e)};console.warn("cxy-react-i18n 设置语言 新语言类型的包未定义")}else console.warn("cxy-react-i18n 设置语言 值不能为空")},setMessage:function(e,n,t){if(e)if("object"!==l(e))console.warn("cxy-react-i18n 设置语言包 值的类型不正确,需要一个对象");else{if(!n.lang||e[n.lang])return{message:s({},e)};console.warn("cxy-react-i18n 设置语言包 当前正在使用的语言在新语言包中不存在,请补充/先重置正在使用的语言包")}else console.warn("cxy-react-i18n 设置语言包 值不能为空")},addMessageItem:function(e,n,t){if(e){if("object"===l(e))return{message:f(s(s({},n.message),e))};console.warn("cxy-react-i18n 添加新语言包 值的类型不正确,需要一个对象")}else console.warn("cxy-react-i18n 添加新语言包 值不能为空")},deleteMessageItem:function(e,n,t){t=t.moduleComputed.i18nLangObj,t=void 0===t?{}:t;if(e)if("string"!==l(e))console.warn("cxy-react-i18n 删除语言包 值类型错误");else{if(t[e]){n=f(n.message);return delete n[e],{message:n}}console.warn("cxy-react-i18n 删除语言包 指定的语言包key不存在")}else console.warn("cxy-react-i18n 删除语言包 值不能为空")},addMessageText:function(n,e,t){if(n){if("object"===l(n)){t=t.moduleComputed.i18nLangKeys;if(t&&t.length){var r=f(e.message);return t.forEach(function(e){r[e]=s(s({},r[e]),n[e])}),{message:r}}return{message:f(n)}}console.warn("cxy-react-i18n 添加已有语言包内容 值的类型不正确,需要一个对象")}else console.warn("cxy-react-i18n 添加已有语言包内容 值不能为空")},updateMessageText:function(e,n,t){if(e){if("object"===l(e)){var r,o=f(n.message),a=[];for(r in e)if(o[r])for(var c in e[r])o[r][c]=e[r][c];else a.push(r);return a.length&&console.warn("cxy-react-i18n 添加语言包 未添加的语言包类型:".concat(a.join("、"),",原因：已有语言类型中不存在这些语言类型")),{message:o}}console.warn("cxy-react-i18n 更新语言包内容 值的类型不正确,需要一个对象")}else console.warn("cxy-react-i18n 更新语言包内容 值不能为空")},deleteMessageText:function(e,n,t){if(e)if("string"!==l(e))console.warn("cxy-react-i18n 删除语言包对应文本 值类型错误");else{if(-1!==t.moduleComputed.i18nMessageKeys.indexOf(e)){var r,o=f(n.message);for(r in o)delete o[r][e];return{message:o}}console.warn("cxy-react-i18n 删除语言包对应文本 值不存在于当前语言包内")}else console.warn("cxy-react-i18n 删除语言包对应文本 值不能为空")}}),computed:Object.freeze({__proto__:null,i18nMessage:d,i18nLangObj:function(e){var n=e.message;try{var t,r={};for(t in n)r[t]=t;return r}catch(e){return{}}},i18nLangKeys:function(e){var n=e.message;try{return Object.keys(n)}catch(e){return[]}},i18nMessageKeys:function(e,n,t){var r=e.message;try{var o=t.cuVal.i18nLangKeys;return o[0]?Object.keys(r[o[0]]):[]}catch(e){return[]}}}),watch:Object.freeze({__proto__:null,watch_lang_message:{fn:function(e,n,t){var r=e.lang,e=e.message;r&&!e[r]&&t.cuVal.i18nLangKeys[0]&&t.refCtx.mr.setLang(t.cuVal.i18nLangKeys[0])},depKeys:["lang","message"],compare:!0,immediate:!0}})};function p(e){var n=e.i18nKey,e=t.useConcent({module:u}).moduleComputed.i18nMessage;return n&&e[n]?e[n]:n}function b(e){return r.default.createElement(p,{i18nKey:e})}function j(){return t.getState(u).lang}function x(){return t.getState(u).message}var w={getLang:j,getMessage:x,gl:j,gm:x};function O(e){return t.reducer[u].setLang(e)}function v(e){return t.reducer[u].setMessage(e)}function M(e){return t.reducer[u].addMessageItem(e)}function C(e){return t.reducer[u].deleteMessageItem(e)}function _(e){return t.reducer[u].addMessageText(e)}function h(e){return t.reducer[u].updateMessageText(e)}function S(e){return t.reducer[u].deleteMessageText(e)}var T={setLang:O,setMessage:v,addMessageItem:M,deleteMessageItem:C,addMessageText:_,updateMessageText:h,deleteMessageText:S,sl:O,sm:v,ami:M,dmi:C,at:_,ut:h,dt:S};function L(e){return t.getComputed(u)[e]}d={getComputed:L,gc:L};return s(s(s(s(s({},i),{},{i18nRun:g,ir:g,registerI18n:m,ri:m,i18nModel:y,im:y,renderI18nKeyToText:b,fr:b},w),T),d),{},{useI18nState:function(e){var n=t.useConcent({module:u}).moduleState;return e?n[e]:n},useI18nReducer:function(){var e=t.useConcent({module:u}),n=e.mr,e=e.moduleReducer;return n||e},useI18nComputed:function(e){var n=t.useConcent({module:u}).moduleComputed;return e?n[e]:n},useI18nKeyToText:function(e){var n=t.useConcent({module:u}).moduleComputed.i18nMessage;return e&&n[e]?n[e]:""}})});
